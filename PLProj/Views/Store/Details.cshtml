@model CartVM

@{
	ViewData["Title"] = "Details";
}

<form asp-action="Details" asp-controller="Store" method="post">
	<section class="py-5">
		<div class="container px-4 px-lg-5 my-5">

			<input type="hidden" asp-for="Id" value="0" />
			<input type="hidden" asp-for="ProductId" />

			<!-- البطاقة -->
			<div class="card shadow-lg border-0 rounded-4 p-3">
				<div class="row g-0">
					<!-- Left: Image -->
					<div class="col-12 col-md-6 d-flex align-items-center justify-content-center mb-3 mb-md-0">
						<div class="w-100" style="max-height: 500px; overflow: hidden; border-radius: 12px;">
							<img src="~/@Model.Product?.ImgPath"
								 class="img-fluid w-100" style="object-fit: cover; height: 100%;" />
						</div>
					</div>

					<!-- Right: Details -->
					<div class="col-12 col-md-6 d-flex flex-column justify-content-between p-3">
						<!-- Category -->
						<div class="small text-muted mb-2" style="overflow-wrap: break-word;">
							@Model.Product?.ProductCategory?.Name
						</div>

						<!-- Title -->
						<h1 class="display-6 fw-bold" style="overflow-wrap: break-word;">@Model.Product?.Name</h1>

						<!-- Price -->
						<div class="fs-4 mb-3">
							<span class="text-muted text-decoration-line-through me-2">
								$@((Model.Product.Price + 30))
							</span>
							<span class="text-success fw-semibold">
								$@Model.Product.Price
							</span>
						</div>

						<!-- Description -->
						<p class="lead mb-4" style="overflow-wrap: break-word;">@Model.Product?.Description</p>

						<!-- Associated Models -->
						@if (Model.Product?.ModelParts != null && Model.Product.ModelParts.Any())
						{
							<div class="mt-4">
								<h5>Available Models:</h5>
								<div class="d-flex flex-wrap gap-2 mt-2">
									@foreach (var modelPart in Model.Product.ModelParts)
									{
										<span class="badge bg-secondary px-3 py-2" style="font-size: 1rem;">
											@modelPart.Model?.Name
										</span>
									}
								</div>
							</div>
						}
						else
						{
							<p class="text-muted">No models associated.</p>
						}




						<!-- Quantity -->
						<div class="d-flex align-items-center gap-3 mb-3 mt-2">
							<label class="form-label mb-0">Quantity:</label>
							<input asp-for="count" class="form-control text-center" style="max-width: 4rem;" />
							<span asp-validation-for="count" class="text-danger"></span>
						</div>

						<!-- Buttons -->
						<div class="d-flex gap-3 flex-wrap">
							<button type="submit" class="btn btn-dark d-flex align-items-center">
								<i class="bi bi-cart-plus me-2"></i> Add to Cart
							</button>
							<a asp-controller="Store" asp-action="Index" class="btn btn-outline-secondary d-flex align-items-center">
								<i class="bi bi-arrow-left me-2"></i> Back to Home
							</a>
						</div>
					</div>
				</div>
			</div>


		</div>
	</section>
</form>
